{% for categoria in categorias %}
{% for servico in categoria.servicos %}            
            <!-- Modal: {{ servico.nome }} -->
            <div id="{{ servico.nome|replace(' ', '')|replace(',', '')  }}" class="modal fade" tabindex="-1"
                role="dialog">
                <div class="modal-dialog">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="panel-title">{{ servico.nome }}</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <p class=""> {{ servico.descricao|safe }}</p>
                            </div>
                            <div class="row">
                                {% if servico.formas %}
                            <h5 class="col-md-3"><strong>Formas de Atendimento:</strong></h5>
                            <p class="col-md-9 ">{{ servico.formas|safe }}</p>
                            {% endif %}
                            </div>
                            <div class="row">
                                {% if servico.requisitos %}
                            <h5 class="col-md-3"><strong>Requisitos:</strong></h5>
                            <p class="col-md-9 ">{{ servico.requisitos|safe }}</p>
                            {% endif %}
                            </div>
                            <div class="row">
                                {% if servico.etapas %}
                            <h5><strong>Como acessar ao serviço(Etapas):</strong></h5>
                            <p class="">{{ servico.etapas|safe }}</p>
                            {% endif %}
                            </div>
                            <div class="row">
                                {% if servico.prazo %}
                            <h5 class="col-md-3"><strong>Prazo:</strong></h5>
                            <p class="col-md-9 ">{{ servico.prazo|safe }}</p>
                            {% endif %}
                            </div>
                            <div class="row">
                                {% if servico.contato %}
                            <h5 class="col-md-3"><strong>Contato:</strong></h5>
                            <p class="col-md-9 ">{{ servico.contato|safe }}</p>
                            {% endif %}
                            </div>
                            <div class="row">
                                {% if servico.comunicacao %}
                                <h5 class="col-md-3"><strong>Comunicação com o Usuário:</strong></h5>
                                <p class="col-md-9 ">{{ servico.comunicacao|safe }}</p>
                                {% endif %}
                            </div>
                            <div class="row">
                                {% if servico.prioridade %}
                                <h5 class="col-md-3"><strong>Prioridade:</strong></h5>
                                <p class="col-md-9 ">{{ servico.prioridade|safe }}</p>
                                {% endif %}
                            </div>
                            <div class="row">
                                {% if servico.custo %}
                                <h5 class="col-md-3"><strong>Custo:</strong></h5>
                                <p class="col-md-9 ">{{ servico.custo|safe }}</p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="panel-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Fechar</button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endfor %}

        <script>
            function resetSearch() {
                const searchInput = document.getElementById('search');
                searchInput.value = ''; // Limpa o campo de busca
                $('.col-md-6').show(); // Mostra todos os cards
            }

            $(document).ready(function () {
                // Filtro de busca no campo "dados-serviço"
                const busca_qtd_chars = 3;
                $('#search').on('input', function () {
                    const query = $(this).val().toLowerCase();
                    if (query.length >= busca_qtd_chars) {
                        $('.card').each(function () {
                            const dadosServico = $(this).data('servico').toLowerCase();
                            $(this).closest('.col-md-6').toggle(dadosServico.includes(query));
                        });
                    } else {
                        $('.col-md-6').show();
                    }
                });
            });
        </script>